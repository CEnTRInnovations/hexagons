<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Hexagonal Thinking</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=Work+Sans:wght@700&display=swap" rel="stylesheet">
  <style>
    :root{ --fg:#4A4A4A; --bg:#F2ECD7; --surface:#E8D8C3; --border:#8e8380; }
    *{ box-sizing:border-box }
    html,body{ margin:0; height:100%; background:var(--bg); color:var(--fg); font-family: 'Inter', system-ui, sans-serif; }
    h1,h2,h3,.heading{ font-family: 'Work Sans', sans-serif; text-transform: uppercase; letter-spacing: .05em; }
    .container{ max-width:1500px; margin:0 auto; padding:16px; display:grid; grid-template-columns:repeat(12,minmax(0,1fr)); gap:16px }
    .card{ background:var(--surface); border:1px solid var(--border); border-radius:12px; box-shadow:0 1px 2px rgba(0,0,0,.06) }
    .pad{ padding:12px }
    .btn{ cursor:pointer; border:1px solid var(--border); background:#fff; padding:6px 10px; border-radius:8px; font-family:'Inter',sans-serif; }
    .btn[disabled]{ opacity:.5; cursor:default }
    .swatch{ width:28px; height:28px; border-radius:6px; border:2px solid transparent }
    .swatch.active{ border-color:var(--border) }
    .hint{ position:absolute; top:12px; right:12px; background:rgba(255,255,255,.85); border:1px solid var(--border); border-radius:8px; padding:4px 8px; font-size:12px; font-family:'Inter',sans-serif; }
    .row{ display:flex; align-items:center; justify-content:space-between }
    .label-sm{ font-size:12px; font-family:'Inter',sans-serif; }
    .grid{ display:grid; gap:12px }
    .t-xs{ font-size:12px }
    .muted{ opacity:.7 }
    input[type="text"], input[type="range"]{ width:100%; font-family:'Inter',sans-serif; }
    input[type="text"]{ border:1px solid var(--border); border-radius:8px; padding:8px; background:#fff; color:var(--fg) }
    .controls{ grid-column:span 12 }
    .canvas{ grid-column:span 12 }
    @media (min-width: 1024px){ .controls{ grid-column:span 3 } .canvas{ grid-column:span 9 } }
  </style>
</head>
<body>
<div id="app" class="container">
  <div class="card controls">
    <div class="pad grid">
      <div class="heading" style="font-weight:700;">Hexagonal Thinking</div>
      <label class="label-sm">New hex text</label>
      <input id="newText" type="text" placeholder="Type and click canvas to add" />
      <div class="label-sm">New hex color</div>
      <div id="newColorSwatches" style="display:flex; flex-wrap:wrap; gap:8px"></div>
      <div>
        <label class="label-sm">Hex size</label>
        <div style="display:flex; align-items:center; gap:8px">
          <input id="size" type="range" min="30" max="110" step="2" />
          <div id="sizeVal" style="width:32px; text-align:right" class="t-xs"></div>
        </div>
      </div>
      <div class="row">
        <div class="label-sm">Show grid</div>
        <input id="showGrid" type="checkbox" />
      </div>
      <div class="row">
        <div class="label-sm">Snap to grid (on drop)</div>
        <input id="snap" type="checkbox" checked />
      </div>
      <div style="border-top:1px solid var(--border); padding-top:12px" class="grid">
        <div class="heading" style="font-weight:600">Selected hex</div>
        <div id="selectedEditor"></div>
      </div>
      <div style="border-top:1px solid var(--border); padding-top:12px" class="grid">
        <div class="heading" style="font-weight:600">Data</div>
        <div style="display:flex; flex-wrap:wrap; gap:8px">
          <label class="btn">
            <input id="importJSON" type="file" accept="application/json" style="display:none" />
            Import JSON
          </label>
          <button id="btnExportJSON" class="btn">Export JSON</button>
          <button id="btnExportCSV" class="btn">Export CSV</button>
        </div>
      </div>
      <div style="border-top:1px solid var(--border); padding-top:12px">
        <div class="heading" style="font-weight:600; margin-bottom:4px">Adjacency</div>
        <div id="adjacencyList" style="max-height:260px; overflow:auto; display:grid; gap:6px; font-size:13px"></div>
        <div id="clustersText" class="t-xs muted"></div>
      </div>
    </div>
  </div>
  <div class="card canvas" style="position:relative">
    <div class="pad" style="padding:8px">
      <svg id="canvas" width="1400" height="900" style="background:#fff; border-radius:12px; box-shadow:inset 0 1px 2px rgba(0,0,0,.06); cursor:crosshair; user-select:none; display:block">
        <g id="grid"></g>
        <g id="edges"></g>
        <g id="hexes"></g>
      </svg>
      <div class="hint">Click canvas to add. Drag to move.</div>
    </div>
  </div>
</div>
<script>
  // Script content omitted for brevity. Use your existing JS logic unchanged.
</script>
</body>
</html>
